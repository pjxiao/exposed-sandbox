(this["webpackJsonpnote-app"]=this["webpackJsonpnote-app"]||[]).push([[0],{46:function(e,t,n){},52:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(0),i=n.n(r),c=n(11),s=n.n(c),o=(n(46),n(7)),l=(n(52),n(53),n(58)),u=n(62),d=n(59),j=n(13),h=Object(j.b)({name:"login",initialState:{state:"PENDING",apiKey:"",clientId:""},reducers:{setApiKey:function(e,t){e.apiKey=t.payload},setClientId:function(e,t){e.clientId=t.payload},setState:function(e,t){e.state=t.payload}}}),b=h.actions,O=b.setApiKey,f=b.setClientId,p=b.setState,v=function(e){return e.login},x=h.reducer;function m(){var e=Object(o.c)(v),t=e.apiKey,n=e.clientId,r=Object(o.b)();return Object(a.jsxs)(l.a,{fluid:"sm",children:[Object(a.jsxs)(u.a,{children:[Object(a.jsxs)(u.a.Group,{children:[Object(a.jsx)(u.a.Label,{children:"API Key"}),Object(a.jsx)(u.a.Control,{type:"text",value:t,onChange:function(e){return r(O(e.target.value))}})]}),Object(a.jsxs)(u.a.Group,{children:[Object(a.jsx)(u.a.Label,{children:"Client ID"}),Object(a.jsx)(u.a.Control,{type:"text",value:n,onChange:function(e){return r(f(e.target.value))}})]})]}),Object(a.jsx)(d.a,{onClick:function(){return r((function(e,t){var n=t().login,a={apiKey:n.apiKey,clientId:n.clientId,scope:"https://www.googleapis.com/auth/spreadsheets.readonly",discoveryDocs:["https://sheets.googleapis.com/$discovery/rest?version=v4"]};gapi.load("client:auth2",(function(){console.log("client:auth2 has been loaded"),gapi.client.init(a).then((function(){var t=gapi.auth2.getAuthInstance();t.isSignedIn.listen((function(){return e(p("AUTHED"))})),t.signIn().then((function(){return e(p("AUTHED"))}))})).catch((function(e){return console.error(e)}))}))}))},children:"Login"})]})}var g=n(39),y=n(61),N=n(35),I=n(65),S=n(63),E=n(60),D=n(36),w=n(64),A=n(33),k=n(32),H=n.n(k),C=H.a.mark(L);function L(e,t){var n,a;return H.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=e[Symbol.iterator](),a=n.next();case 2:if(a.done){r.next=10;break}return r.next=5,a.value;case 5:return r.next=7,t;case 7:a=n.next(),r.next=2;break;case 10:case"end":return r.stop()}}),C)}function T(e){var t=(e.children||"").replace(/([a-zA-Z0-9])([^a-zA-Z0-9/'., -])/g,"$1 $2").replace(/([^a-zA-Z0-9/'., -])([a-zA-Z0-9])/g,"$1 $2").split(" ").map((function(t,n){return Object(r.createElement)("a",Object(A.a)(Object(A.a)({},e),{},{href:"".concat("https://dictionary.cambridge.org/dictionary/english","/").concat((a=t,a.replace(/^\s|\s$/,"").replace(/'s?$/,"").replace(/[.,]$/,""))),target:"_blank",rel:"noopener noreferrer",key:n}),t);var a}));return Object(a.jsx)(a.Fragment,{children:Array.from(L(t," "))})}var R="SPREADSHEETS",K="ROWS",P=function(){return JSON.parse(window.localStorage.getItem(R)||"[]")},W=Object(j.b)({name:"training",initialState:{state:"READY",spreadsheetId:null,sheet:"Sheet1",data:null,ptr:0,visibility:"HIDDEN"},reducers:{clearState:function(e){e.state="READY",e.spreadsheetId=null,e.data=null},setState:function(e,t){e.state=t.payload},setSpreadsheetId:function(e,t){e.spreadsheetId=t.payload},setData:function(e,t){e.data=t.payload},next:function(e){null!==e.data&&e.ptr<e.data.length-1&&(e.ptr++,e.visibility="HIDDEN")},toggleVisibility:function(e){null!==e.data&&("HIDDEN"===e.visibility?e.visibility="SHOWN":"SHOWN"===e.visibility&&(e.visibility="HIDDEN"))},prev:function(e){null!==e.data&&e.ptr>0&&(e.ptr--,e.visibility="HIDDEN")}}}),$=W.actions,z=$.clearState,B=$.setState,G=$.setSpreadsheetId,J=$.setData,U=$.next,F=$.prev,Z=$.toggleVisibility,Q=function(e){return null===e.training.data?null:e.training.data[e.training.ptr]},Y=function(e){return e.training},V=function(e){return function(t,n){(function(e){var t,n;return(null===(t=gapi.client)||void 0===t||null===(n=t.sheets)||void 0===n?void 0:n.spreadsheets.get({spreadsheetId:e}).then((function(t){var n;console.log(t);var a=P();a.push({spreadsheetId:e,title:(null===(n=t.result.properties)||void 0===n?void 0:n.title)||"UNKNOWN"}),window.localStorage.setItem(R,JSON.stringify(a))})))||new Promise((function(e,t){return t("Not authorized")}))})(e).catch((function(e){"Not authorized"===e&&t(p("REQUESTED"))})).catch(console.error)}},M=function(e){return function(t){t(B("LOADING")),function(e,t){var n,a,r=JSON.parse(window.localStorage.getItem(K)||"[]"),i=r.filter((function(t){return t.spreadsheetId===e}));return(i.length>0?new Promise((function(e){return e(i)})):null===(n=gapi.client)||void 0===n||null===(a=n.sheets)||void 0===a?void 0:a.spreadsheets.values.get({spreadsheetId:e,range:t}).then((function(t){if(t.result.values){var n=t.result.values.map((function(t,n){return{spreadsheetId:e,rowIndex:n,cells:t}}));return window.localStorage.setItem(K,JSON.stringify(r.concat(n))),n}throw Error(JSON.stringify(t))})))||new Promise((function(e,t){return t("Not authorized")}))}(e,"Sheet1").then((function(n){var a=[n[0],n.slice(1)],r=a[0],i=a[1],c=Object.fromEntries(r.cells.filter((function(e){return!!e})).map((function(e,t){return[e,t]}))),s=i.map((function(e){return{section:Number(e.cells[c.section])||0,num:Number(e.cells[c["#"]])||0,ja:String(e.cells[c["\u65e5\u672c\u8a9e"]]||""),en:String(e.cells[c["\u82f1\u8a9e"]]||""),note:String(e.cells[c["\u89e3\u8aac"]]||"")}}));t(B("LOADED")),t(G(e)),t(J(s)),console.log("loaded",{data:s})})).catch((function(e){"Not authorized"===e&&t(p("REQUESTED"))})).catch(console.error)}},_=W.reducer,q=function(){var e=Object(o.b)(),t=Object(r.useState)(""),n=Object(g.a)(t,2),i=n[0],c=n[1],s=P();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(y.a,{variant:"dark",bg:"dark",children:Object(a.jsxs)(u.a,{inline:!0,children:[Object(a.jsx)(N.a,{type:"text",value:i,className:"mr-sm-2",onChange:function(e){return c(e.target.value)}}),Object(a.jsx)(d.a,{variant:"outline-info",onClick:function(){return e(V(i))},children:"Load"})]})}),Object(a.jsx)(I.a,{children:s.map((function(t,n){return Object(a.jsx)(I.a.Item,{action:!0,variant:"flash",onClick:function(){return e(M(t.spreadsheetId))},children:t.title},n)}))})]})};function X(){var e=Object(o.c)(Y),t=e.spreadsheetId,n=e.visibility,r=e.state,i=Object(o.c)(Q),c=Object(o.b)();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("header",{children:Object(a.jsxs)(y.a,{variant:"dark",bg:"dark",className:"overflow-auto",children:[Object(a.jsx)(y.a.Brand,{children:t}),Object(a.jsx)(S.a,{children:Object(a.jsx)(S.a.Link,{onClick:function(){return c(z())},children:"LIST"})})]})}),Object(a.jsx)(l.a,{fluid:!0,className:"mb-5",children:function(){switch(r){case"READY":return Object(a.jsx)(E.a,{children:Object(a.jsx)(D.a,{children:Object(a.jsx)("p",{children:"^ INPUT SPREADSHEET ID"})})});case"LOADING":return Object(a.jsx)(E.a,{children:Object(a.jsx)(D.a,{children:Object(a.jsx)("p",{children:"LOADING"})})});case"FAILED":return Object(a.jsx)(E.a,{children:Object(a.jsx)(D.a,{children:Object(a.jsx)("p",{children:"FAILED"})})});case"LOADED":return Object(a.jsx)(E.a,{children:Object(a.jsxs)(D.a,{children:[Object(a.jsxs)(w.a,{className:"mt-3",children:[Object(a.jsx)(w.a.Header,{children:"JA"}),Object(a.jsx)(w.a.Body,{children:null===i||void 0===i?void 0:i.ja})]}),Object(a.jsxs)(w.a,{className:"mt-3",children:[Object(a.jsx)(w.a.Header,{children:"EN"}),Object(a.jsx)(w.a.Body,{className:"SHOWN"===n?"vibible":"invisible",children:Object(a.jsx)(T,{className:"text-body",children:null===i||void 0===i?void 0:i.en})})]}),Object(a.jsxs)(w.a,{className:"mt-3",children:[Object(a.jsx)(w.a.Header,{children:"NOTE"}),Object(a.jsx)(w.a.Body,{className:"SHOWN"===n?"vibible":"invisible",children:Object(a.jsx)(T,{className:"text-body",children:(null===i||void 0===i?void 0:i.note)||"n/a"})})]})]})})}}()}),Object(a.jsx)(y.a,{fixed:"bottom",variant:"dark",bg:"dark",children:Object(a.jsxs)(l.a,{fluid:!0,children:[Object(a.jsx)(S.a,{className:"ms-auto",children:Object(a.jsx)(d.a,{variant:"outline-info",onClick:function(){return c(F())},children:"Prev"})}),Object(a.jsx)(S.a,{className:"me-auto ms-auto",children:Object(a.jsx)(d.a,{variant:"outline-info",onClick:function(){return c(Z())},children:"TOGGLE ANSWER"})}),Object(a.jsx)(S.a,{className:"me-auto",children:Object(a.jsx)(d.a,{className:"me-auto",variant:"outline-info",onClick:function(){return c(U())},children:"Next"})})]})})]})}function ee(){return null===Object(o.c)(Y).spreadsheetId?Object(a.jsx)(q,{}):Object(a.jsx)(X,{})}var te=function(){return"REQUESTED"===Object(o.c)(v).state?Object(a.jsx)(m,{}):Object(a.jsx)(ee,{})},ne=Object(j.b)({name:"counter",initialState:{value:0},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}}}),ae=ne.actions,re=(ae.increment,ae.decrement,ae.incrementByAmount,ne.reducer),ie=Object(j.a)({reducer:{counter:re,login:x,training:_}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(o.a,{store:ie,children:Object(a.jsx)(te,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[56,1,2]]]);
//# sourceMappingURL=main.f66a48cc.chunk.js.map